<UserControl
    x:Class="RX_Client.Views.LibraryView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converters="clr-namespace:RX_Client.Utils.Converters"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
    mc:Ignorable="d"
    d:DesignHeight="600"
    d:DesignWidth="800">

    <ScrollViewer>
        <StackPanel Margin="20">
            <TextBlock
                Margin="0,0,0,20"
                FontSize="28"
                FontWeight="Bold"
                Foreground="White"
                Text="Thư viện của tôi" />

            <ProgressBar
                HorizontalAlignment="Center"
                IsIndeterminate="True"
                Style="{DynamicResource MaterialDesignCircularProgressBar}"
                Visibility="{Binding IsLoading, Converter={StaticResource BoolToVis}}" />

            <!--  Danh sách Playlist dạng lưới (WrapPanel)  -->
            <ItemsControl ItemsSource="{Binding Playlists}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <!--  Card Playlist đơn giản  -->
                        <materialDesign:Card
                            Width="160"
                            Height="200"
                            Margin="0,0,15,15"
                            Background="#1E1E1E">
                            <StackPanel>
                                <Border
                                    Height="140"
                                    Background="#333"
                                    CornerRadius="4,4,0,0">
                                    <materialDesign:PackIcon
                                        Width="50"
                                        Height="50"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        Foreground="Gray"
                                        Kind="MusicBoxMultiple" />
                                </Border>
                                <TextBlock
                                    Margin="10,10,10,0"
                                    FontWeight="Bold"
                                    Foreground="White"
                                    Text="{Binding Name}"
                                    TextTrimming="CharacterEllipsis" />
                                <TextBlock
                                    Margin="10,0,10,0"
                                    FontSize="12"
                                    Foreground="Gray"
                                    Text="{Binding SongCount, StringFormat='{}{0} bài hát'}" />
                            </StackPanel>
                        </materialDesign:Card>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>

            <TextBlock
                Margin="0,50,0,0"
                HorizontalAlignment="Center"
                Foreground="Gray"
                Text="Chưa có playlist nào."
                Visibility="{Binding Playlists.Count, Converter={StaticResource InverseBool}}" />
        </StackPanel>
    </ScrollViewer>
</UserControl>