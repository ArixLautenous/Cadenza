<UserControl x:Class="RX_Client.Controls.AlbumCardControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             mc:Ignorable="d" 
             Width="180" Height="240">

    <Button Style="{DynamicResource MaterialDesignFlatButton}" 
            Padding="0" Height="Auto" 
            HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch">
        <StackPanel>
            <!-- Ảnh Album (Card vuông bo góc) -->
            <Border Width="160" Height="160" CornerRadius="8" ClipToBounds="True" Margin="0,10,0,10">
                <Grid>
                    <Image Source="{Binding ThumbnailUrl, TargetNullValue=/Assets/Images/default_album.png}" Stretch="UniformToFill"/>

                    <!-- Overlay Play Button khi hover -->
                    <Grid Background="#66000000" Opacity="0" x:Name="HoverOverlay">
                        <materialDesign:PackIcon Kind="PlayCircle" Width="48" Height="48" Foreground="White" 
                                                 HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Grid>
                </Grid>

                <!-- Hiệu ứng hover cho ảnh -->
                <Border.Triggers>
                    <EventTrigger RoutedEvent="MouseEnter">
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetName="HoverOverlay" Storyboard.TargetProperty="Opacity" To="1" Duration="0:0:0.2"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger>
                    <EventTrigger RoutedEvent="MouseLeave">
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetName="HoverOverlay" Storyboard.TargetProperty="Opacity" To="0" Duration="0:0:0.2"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger>
                </Border.Triggers>
            </Border>

            <!-- Tên Album -->
            <TextBlock Text="{Binding Title}" 
                       Foreground="{DynamicResource YtmTextPrimary}" 
                       FontWeight="Bold" FontSize="14" 
                       TextTrimming="CharacterEllipsis" Margin="10,0,10,0"/>

            <!-- Nghệ sĩ / Năm -->
            <TextBlock Text="{Binding ArtistName}" 
                       Foreground="{DynamicResource YtmTextSecondary}" 
                       FontSize="12" Margin="10,2,10,0"/>
        </StackPanel>
    </Button>
</UserControl>